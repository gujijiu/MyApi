<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MY_API - MM_API数据接口调用服务平台</title>
    <link rel="shortcut icon" href="https://api.uomg.com/assets/favicon.ico">
    <link href="http://__url__/static/Index/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://__url__/static/Index/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://__url__/static/Index/css/site.min.css" rel="stylesheet">
    <link href="http://__url__/static/Admin/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="http://__url__/static/Admin/css/style.min.css" rel="stylesheet">
    <link rel="stylesheet" href="http://__url__/static/Admin/js/jconfirm/jquery-confirm.min.css">
    <style>
    .img-avatar-48 {
        width: 48px;
        height: 48px;
        line-height: 48px;
    }

    .img-avatar {
        display: inline-block !important;
        width: 64px;
        height: 64px;
        line-height: 64px;
        text-align: center;
        vertical-align: middle;
        -webkit-border-radius: 50%;
        border-radius: 50%;
    }
    .tx{
        float: left !important;
    }
    </style>
</head>

<body class="home-template">
    <header class="site-header">
        <nav class="navbar navbar-static-top main-navbar" id="top">
            <div class="container">
                <div class="navbar-header">
                    <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
                    <a href="" class="navbar-brand brand-uomgapi text-hide">MY_API</a>
                </div>
                <div class="tx navbar-right">
                    <a>
                        {if $Think.session.user_id != null}
                        <img class="img-avatar img-avatar-48 m-r-10" src="http://__url__{$user.user_img}" alt="{$user.user}" />
                        {/if}
                    </a>
                </div>
                <nav id="bs-navbar" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="http://__url__/index.php/admin/login">进入后台</a></li>
                        {if $Think.session.user_id != null}
                        <li><a href="http://__url__/index.php/index/index/user">个人信息</a></li>
                        {else /}
                        <li><a href="http://__url__/index.php/index/login">登陆</a></li>
                        <li><a href="http://__url__/index.php/index/login/register">注册</a></li>
                        {/if}
                        <li><a href="http://__url__/index.php/index/login/login_out">退出登陆</a></li>
                    </ul>
                </nav>
            </div>
        </nav>
        <div class="container jumbotron">
            <div class="row">
                <div class="col-xs-12">
                    <h1>MY_API<img src="http://__url__/static/Index/picture/logo.png" alt="MY_API logo" class="hidden"></h1>
            </div>
        </div>
    </header>
    <div class="container protocal-notice hidden-xs">
        <div class="row">
            <div class="col-xs-12">
                <div class="pull-right">
                    <a href="#" target="_blank">提示信息</a>
                </div>
            </div>
        </div>
    </div>
<main style="height: 600px;">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>昵称</th>
                <th>账户</th>
                <th>密码</th>
                <th>手机号</th>
                <th>邮箱</th>
                <th>API_KEY</th>
                <th>余额</th>
                <th>最近登陆IP</th>
                <th>最近登陆时间</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <div class="form-group">
                        <input class="form-control" type="text" id="user" name="user" placeholder="昵称" value="{$user.user}" onblur="user_name()">
                    </div>
                </td>
                <td>
                <div class="form-group">
                    <input class="form-control" type="text" id="user_name" name="user_name" placeholder="用户名" value="{$user.user_name}" onblur="user_name()">
                </div>
                </td>
                <td>
                    <div class="form-group">
                        <input class="form-control" type="text" id="user_pwd" name="user_pwd" placeholder="新密码"  onblur="user_pwd()">
                    </div>
                </td>
                <td>
                    <div class="form-group">
                        <input class="form-control" type="text" id="user_phone" name="user_phone" placeholder="手机号" value="{$user.user_phone}" onblur="user_phone()">
                    </div>
                </td>
                <td>
                    <div class="form-group">
                        <input class="form-control" type="text" id="user_email" name="user_email" placeholder="邮箱" value="{$user.user_email}" onblur="user_email()">
                    </div>
                </td>  
                <td><button class="btn btn-dark btn-w-md" type="button" onclick="api_key('{$user.api_key}')">点击查看</button></td>
                <td><p>{$user.user_money}</p></td>
                <td><p>{$user.user_log_ip}</p></td>
                <td><p>{$user.user_log_time = date('Y-m-s h:i:s',$user.user_log_time)}</p></td>
            </tr>
        </tbody>
    </table>
</main>
    <footer id="footer" class="footer hidden-print">
        <div class="container">
            <div class="row">
                <div class="footer-about col-md-5 col-sm-12" id="about">
                    <h4>关于 MY_API</h4>
                    <p>
                        MY_API 是 LSY 支持并维护的 API 接口项目，致力于为用户提供稳定、快速的免费 API 接口服务平台。
                    </p>
                    
                    <p>
                        反馈或建议请发送邮件至：2991993849@qq.com
                    </p>
                </div>
                <div class="footer-links col-md-3 col-sm-12">
                    <h4>友情链接</h4>
                    <ul class="list-unstyled list-inline">
                        
                    </ul>
                </div>
            </div>
        </div>
        <div class="copy-right">
            <span>&copy; 2021-2021</span><a href="javascript:;" target="_blank">毕设项目-MY_API</a><span></span>
        </div>
    </footer><a href="#" id="back-to-top"><i class="fa fa-angle-up"></i></a>
    <script src="https://lib.baomitu.com/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://lib.baomitu.com/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://lib.baomitu.com/geopattern/1.2.3/js/geopattern.min.js"></script>
    <script src="https://lib.baomitu.com/clipboard.js/1.5.16/clipboard.min.js"></script>
    <script src="https://lib.baomitu.com/localforage/1.4.2/localforage.min.js"></script>
    <script src="https://lib.baomitu.com/lodash.js/4.17.4/lodash.min.js"></script>
    <script src="https://lib.baomitu.com/layer/3.1.1/layer.js"></script>
    <script type="text/javascript" src="http://__url__/static/Admin/js/perfect-scrollbar.min.js"></script>
    <script type="text/javascript" src="http://__url__/static/Admin/js/main.min.js"></script>
    <script src="http://__url__/static/Admin/js/bootstrap-notify.min.js"></script>
    <script type="text/javascript" src="http://__url__/static/Admin/js/lightyear.js"></script>
    <script src="http://__url__/static/Admin/js/jconfirm/jquery-confirm.min.js "></script>
    <script>
        function api_key(api_key) {
            $.alert({
                title: '密钥',
                content: api_key,
                buttons: {
                    cancel: {
                        text: '取消',
                    }
                }
            });
        }
        
        function user() {
            var par = document.getElementById("user").value;
            $.ajax({
                url: 'http://__url__/index.php/admin/user/upd_user',
                type: 'POST',
                data: {
                    user_id: {$user.user_id},
                    user: par
                },
                dataType: 'json',
                success: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改成功!', 'success', 3000);
                    }, 1e3)
                },
                error: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改失败，请检查重试！', 'danger', 100);
                    }, 1e3)
                }
            });
        }

        function user_name() {
            var par = document.getElementById("user_name").value;
            $.ajax({
                url: 'http://__url__/index.php/admin/user/upd_user_name',
                type: 'POST',
                data: {
                    user_id: {$user.user_id},
                    user_name: par
                },
                dataType: 'json',
                success: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改成功!', 'success', 3000);
                    }, 1e3)
                },
                error: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改失败，请检查重试！', 'danger', 100);
                    }, 1e3)
                }
            });
        }

        function user_pwd() {
            var par = document.getElementById("user_pwd").value;
            if(par == ""){
                lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('请输入新密码！', 'danger', 100);
                    }, 1e3)
            }else{
                $.ajax({
                url: 'http://__url__/index.php/admin/user/upd_user_pwd',
                type: 'POST',
                data: {
                    user_id: {$user.user_id},
                    user_pwd: par
                },
                dataType: 'json',
                success: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改成功!', 'success', 3000);
                    }, 1e3)
                    location.reload();
                },
                error: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改失败，请检查重试！', 'danger', 100);
                    }, 1e3)
                    location.reload();
                }
            });
            }
        }

        function user_phone() {
            var par = document.getElementById("user_phone").value;
            $.ajax({
                url: 'http://__url__/index.php/admin/user/upd_user_phone',
                type: 'POST',
                data: {
                    user_id: {$user.user_id},
                    user_phone: par
                },
                dataType: 'json',
                success: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改成功!', 'success', 3000);
                    }, 1e3)
                },
                error: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改失败，请检查重试！', 'danger', 100);
                    }, 1e3)
                }
            });
        }

        function user_email() {
            var par = document.getElementById("user_email").value;
            $.ajax({
                url: 'http://__url__/index.php/admin/user/upd_user_email',
                type: 'POST',
                data: {
                    user_id: {$user.user_id},
                    user_email: par
                },
                dataType: 'json',
                success: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改成功!', 'success', 3000);
                    }, 1e3)
                },
                error: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改失败，请检查重试！', 'danger', 100);
                    }, 1e3)
                }
            });
        }

    </script>
</body>

</html>