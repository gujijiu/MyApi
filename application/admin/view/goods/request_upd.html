<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>首页 - MY_API后台管理系统模板</title>
    <link rel="icon" href="favicon.ico" type="image/ico">
    <meta name="keywords" content="MY_API,后台模板,后台管理系统,MY_APIHTML模板">
    <meta name="description" content="MY_API是一个基于Bootstrap v3.3.7的后台管理系统的HTML模板。">
    <meta name="author" content="yinqi">
    <link href="http://__url__/static/Admin/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://__url__/static/Admin/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="http://__url__/static/Admin/css/style.min.css" rel="stylesheet">
    <style>
        .lyear-layout-content {
            padding-left: 0px;
        }
        
        .col-xs-6 {
            width: 100%;
        }
    </style>
</head>

<body>
    <main class="lyear-layout-content">

        <div class="container-fluid">

            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <h4>接口请求信息管理设置</h4>
                        </div>
                        <div class="card-body">

                            <h5>接口请求信息 <code></code></h5>
                            <table class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>请求id</th>
                                        <th>接口id</th>
                                        <th>请求名称</th>
                                        <th>是否必填</th>
                                        <th>请求类型</th>
                                        <th>请求说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th>{$vo.request_id}</th>
                                        <th>{$vo.goods_id}</th>
                                        <td>
                                            <div class="form-group">
                                                <input class="form-control" type="text" id="request_name" name="request_name" placeholder="名称"  onblur="request_name()" value="{$vo.request_name}" >
                                            </div>
                                        </td>
                                        <td>
                                            <label class="lyear-switch switch-solid switch-primary">
                                                    <input type="checkbox" class="request_nece" id="request_nece" value="on" name="request_nece">
                                                    <span></span>
                                            </label>
                                        </td>
                                        <td>
                                            <div class="form-group">
                                                <input class="form-control" type="text" id="request_type" name="request_type" placeholder="类型" data-toggle="tooltip" data-placement="bottom" title="默认String" value="{$vo.request_type}"  onblur="request_type()">
                                            </div>
                                        </td>
                                        <td>
                                            <textarea class="form-control" id="request_explain" name="request_explain" rows="6" title="可为空" data-toggle="tooltip" placeholder="接口描述" onblur="request_explain()"></textarea>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        </div>
    </main>
    {include file='./default/admin_mall/js' /}
    <!--消息提示-->
    <script src="http://__url__/static/Admin/js/bootstrap-notify.min.js"></script>
    <script type="text/javascript" src="http://__url__/static/Admin/js/lightyear.js"></script>
    <script>  
        document.getElementById("request_explain").value="{$vo.request_explain}";
        if ({$vo.request_nece} == 1) {
            $('.lyear-switch').find('input[name="request_nece"]').prop('checked', true);
        }

        function request_name() {
            var par = document.getElementById("request_name").value;
            $.ajax({
                url: 'http://__url__/index.php/admin/goods/upd_request_name',
                type: 'POST',
                data: {
                    request_id: {$vo.request_id},
                    request_name: par
                },
                dataType: 'json',
                success: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改成功!', 'success', 3000);
                    }, 1e3)
                },
                error: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改失败，请检查重试！', 'danger', 100);
                    }, 1e3)
                }
            });
        }

        function request_type() {
            var par = document.getElementById("request_type").value;
            $.ajax({
                url: 'http://__url__/index.php/admin/goods/upd_request_type',
                type: 'POST',
                data: {
                    request_id: {$vo.request_id},
                    request_type: par
                },
                dataType: 'json',
                success: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改成功!', 'success', 3000);
                    }, 1e3)
                },
                error: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改失败，请检查重试！', 'danger', 100);
                    }, 1e3)
                }
            });
        }

        function request_explain() {
            var par = document.getElementById("request_explain").value;
            $.ajax({
                url: 'http://__url__/index.php/admin/goods/upd_request_explain',
                type: 'POST',
                data: {
                    request_id: {$vo.request_id},
                    request_explain: encodeURIComponent(par)
                },
                dataType: 'json',
                success: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改成功!', 'success', 3000);
                    }, 1e3)
                },
                error: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改失败，请检查重试！', 'danger', 100);
                    }, 1e3)
                }
            });
        }

        $('.request_nece').click(function() {
            var $switch = $('input[name="request_nece"]:checked').val();
            if ($switch == undefined) {
                $switch = 0;
            } else {
                $switch = 1;
            }
            $.ajax({
                url: 'http://__url__/index.php/admin/goods/upd_request_nece',
                type: 'POST',
                data: {
                    request_id: {$vo.request_id},
                    request_nece: $switch
                },
                dataType: 'json',
                success: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改成功!', 'success', 3000);
                    }, 1e3)
                },
                error: function(jg) {
                    lightyear.loading('show');
                    // 假设ajax提交操作
                    setTimeout(function() {
                        lightyear.loading('hide');
                        lightyear.notify('修改失败，请检查重试！', 'danger', 100);
                    }, 1e3)
                }
            });
        })
    </script>
</body>

</html>